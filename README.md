# DiaryTui

Rust + ratatuiで作成したターミナルベースの日記アプリケーションです。

## 機能

- **3×3グリッドカレンダー表示**: 9ヶ月分のカレンダーを一度に表示
- **長期的な予定の俯瞰**: 複数月にわたる日記の記入状況を一目で確認
- **日本語対応**: 曜日や月の表示が日本語で表示されます
- **Markdownエディタ**: 日記をMarkdown形式で記入可能
- **記入済み日の視覚的表示**: カレンダー上で記入済みの日が下線で表示されます
- **自動保存**: 日記データはJSON形式で自動的に保存されます

## インストール

```bash
cargo build --release
```

## 実行

```bash
cargo run
```

または、ビルド後のバイナリを直接実行:

```bash
./target/release/diary_tui
```

## 使い方

### カレンダーモード

カレンダーモードでは、日付を選択して日記を書く日を選びます。

**キー操作:**

- `h` / `←` : 前日に移動
- `l` / `→` : 翌日に移動
- `k` / `↑` : 1週間前に移動
- `j` / `↓` : 1週間後に移動
- `H` (Shift+H) : 前月に移動
- `L` (Shift+L) : 翌月に移動
- `Enter` : 選択した日の日記を編集
- `q` : アプリケーションを終了

**表示の見方:**

- **黄色で太字**: 今日の日付
- **シアン背景**: 現在選択中の日付
- **下線付き**: 日記が記入済みの日
- **赤文字**: 日曜日
- **青文字**: 土曜日

### エディタモード

エディタモードでは、選択した日の日記をMarkdown形式で記入できます。

**キー操作:**

- `文字入力` : テキストを入力
- `Enter` : 改行
- `Backspace` : 1文字削除
- `←` `→` `↑` `↓` : カーソル移動
- `Tab` : 保存してカレンダーモードに戻る
- `Esc` : 保存せずにカレンダーモードに戻る
- `Ctrl+S` : 保存してカレンダーモードに戻る

## データ保存場所

日記データは以下の場所に保存されます:

- **Linux**: `~/.local/share/DiaryTui/diary.json`
- **macOS**: `~/Library/Application Support/DiaryTui/diary.json`
- **Windows**: `C:\Users\<username>\AppData\Roaming\DiaryTui\diary.json`

データはJSON形式で保存され、手動でバックアップや編集が可能です。

## プロジェクト構造

```
src/
├── main.rs       # エントリーポイント、イベントループ
├── app.rs        # アプリケーション状態管理
├── calendar.rs   # カレンダーロジック
├── editor.rs     # テキストエディタロジック
├── storage.rs    # データ保存/読み込み
└── ui.rs         # UI描画
```

## 依存関係

- `ratatui` - TUIフレームワーク
- `crossterm` - クロスプラットフォームターミナル操作
- `chrono` - 日付時刻処理
- `serde` + `serde_json` - データシリアライゼーション
- `directories` - プラットフォーム固有のディレクトリパス取得

## ライセンス

MIT
